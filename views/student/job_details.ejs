<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Add Job Details</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/public/css/tailwind.css" />
    <link rel="stylesheet" href="/public/css-fontawesome/all.min.css" />
    <script src="/public/js/loadHeaderFooter.js"></script>
  </head>
  <body class="bg-gray-100 font-sans min-h-screen flex flex-col">
    <div id="header"></div>

    <main class="flex-grow container mx-auto px-4 py-8 max-w-3xl">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">Add Placement Details</h1>
        <a
          href="/student/dashboard"
          class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg font-semibold transition flex items-center gap-2"
        >
          <i class="fa-solid fa-arrow-left"></i> Back
        </a>
      </div>

      <div class="bg-white rounded-xl shadow-lg overflow-hidden">
        <div
          class="bg-blue-50 px-6 py-4 border-b border-blue-100 flex flex-wrap gap-4 text-sm text-blue-800"
        >
          <span
            ><i class="fa-solid fa-id-badge mr-1"></i> <%= student.rollno
            %></span
          >
          <% if (student.student_name) { %>
          <span class="hidden sm:inline">|</span>
          <span
            ><i class="fa-solid fa-user mr-1"></i> <%= student.student_name
            %></span
          >
          <span class="hidden sm:inline">|</span>
          <span
            ><i class="fa-solid fa-building-columns mr-1"></i> <%=
            student.department %></span
          >
          <% } %>
        </div>

        <% if (message) { %>
        <div
          class="m-6 bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded shadow-sm"
        >
          <p class="font-medium">
            <i class="fa-solid fa-triangle-exclamation mr-2"></i> <%= message %>
          </p>
        </div>
        <% } %>

        <form
          action="/student/job-details"
          method="POST"
          enctype="multipart/form-data"
          id="formSubmit"
          class="p-8 space-y-6"
        >
          <input type="hidden" name="rollno" value="<%= student.rollno %>" />

          <div class="grid grid-cols-1 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1"
                >Company Name <span class="text-red-500">*</span></label
              >
              <div class="relative">
                <span
                  class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400"
                  ><i class="fa-solid fa-building"></i
                ></span>
                <input
                  type="text"
                  name="company_name"
                  required
                  class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                  placeholder="e.g. Tata Consultancy Services"
                />
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1"
                >Company Address <span class="text-red-500">*</span></label
              >
              <textarea
                name="address_of_company"
                rows="3"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                placeholder="Full address of the company location"
              ></textarea>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1"
                >Date of Joining <span class="text-red-500">*</span></label
              >
              <input
                type="date"
                name="date_of_joining"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1"
                >Date of Leaving (If applicable)</label
              >
              <input
                type="date"
                name="date_of_leaving"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
              />
            </div>
          </div>

          <div
            class="border-2 border-dashed border-blue-200 rounded-lg p-6 bg-blue-50 text-center transition hover:bg-blue-100"
          >
            <i
              class="fa-solid fa-cloud-arrow-up text-4xl text-blue-400 mb-2"
            ></i>
            <label class="block text-sm font-bold text-gray-700 mb-2"
              >Upload Offer Letter <span class="text-red-500">*</span></label
            >
            <p class="text-xs text-gray-500 mb-3">
              Supported formats: PDF, JPG, PNG
            </p>
            <input
              type="file"
              name="offer_letter"
              accept="image/*,.pdf"
              required
              class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 mx-auto max-w-xs"
            />
          </div>

          <button
            type="submit"
            class="w-full bg-blue-700 text-white font-bold py-3 rounded-lg hover:bg-blue-800 transition shadow-lg flex items-center justify-center gap-2"
          >
            <i class="fa-solid fa-paper-plane"></i> Submit Details
          </button>
        </form>
      </div>
    </main>

    <script>
      document
        .getElementById('formSubmit')
        .addEventListener('submit', function (e) {
          if (!confirm('Are you sure you want to submit these details?'))
            e.preventDefault();
        });
      function goToHistoryPage(url) {
        window.location.href = url;
      }
    </script>
  </body>
</html>
